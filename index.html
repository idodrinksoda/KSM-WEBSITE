<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Kama Sutra Murder — Official Site</title>
  <meta name="description" content="Kama Sutra Murder — heavy rock/grunge/alt-metal from Vancouver, BC. Shows, music, merch, contact." />

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&display=swap" rel="stylesheet">

  <!-- Site styles -->
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <header>
    <div class="container nav">
      <div class="logo"><span class="dot"></span> KAMA SUTRA MURDER</div>

      <!-- Desktop nav (kept but hidden via CSS) -->
      <nav aria-label="Main navigation">
        <ul class="nav-list">
          <li><a href="#shows">Shows</a></li>
          <li><a href="#music">Music</a></li>
          <li><a href="#mailing-list" data-open-mc>Mailing list</a></li>
          <li><a href="#contact">Contact</a></li>
        </ul>
      </nav>

      <!-- Hamburger (always visible) -->
      <button class="hamburger" id="hamburger" aria-expanded="false" aria-controls="mobileMenu" aria-label="Toggle menu">
        <svg viewBox="0 0 24 24" fill="none" aria-hidden="true">
          <path d="M3 6h18M3 12h18M3 18h18" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
        </svg>
      </button>
  <!-- Dropdown menu -->
<div id="mobileMenu" role="menu" aria-label="Mobile menu">
  <a href="#shows" role="menuitem">Shows</a>
  <a href="#music" role="menuitem">Music</a>
  <a href="#" role="menuitem" data-open-mc>Mailing list</a>

  <a href="#contact"
     id="contactToggle"
     role="menuitem"
     aria-expanded="false"
     aria-controls="contactSub">Contact</a>

  <div id="contactSub" class="submenu" hidden>
    <a href="mailto:kamasutramurder@gmail.com">kamasutramurder@gmail.com</a>
  </div>
</div>


  </header>

  <main>
    <!-- HERO -->
    <section class="hero has-image">
      <div class="container">
        <h1>Heavy, hypnotic, and loud.</h1>
        <p>grunge/stoner/alt-metal/punk from Vancouver, BC. New singles and show dates below — get on the list.</p>
        <button class="cta" id="joinList" data-open-mc>Join the mailing list</button>
      </div>
    </section>

    <!-- SHOWS -->
    <section id="shows">
      <div class="container">
        <h2>Shows</h2>
        <div class="card">
          <div class="shows-grid">
            <!-- Jig Space -->
            <article class="show-card"
              data-title="KSM — Punk-tober"
              data-date="2025-10-31"
              data-city="Vancouver, BC"
              data-venue="Jig Space"
              data-desc="Yeah Man Entertainment — doors 8pm, 19+."
              data-poster="posters/jigspace-2025-10-31.jpg"
              data-map="https://www.google.com/maps/dir//8889+Laurel+St+unit+106,+Vancouver,+BC+V6P+3V9/@49.2046355,-123.2077643,12z/data=!4m8!4m7!1m0!1m5!1m1!1s0x54867505c45bb40d:0x665c676e628d849f!2m2!1d-123.1253639!2d49.2046648?entry=ttu"
              data-tickets="https://www.eventbrite.ca/e/yeah-man-entertainment-punktoberfest-tickets-1768096818179">
              <figure class="show-media">
                <img src="posters/punktober.jpg" alt="KSM at Jig Space — Oct 31, 2025" loading="lazy">
              </figure>
              <div class="show-meta">
                <time datetime="2025-10-31">Oct 31, 2025</time>
                <span>Vancouver, BC • Jig Space</span>
              </div>
              <div class="show-actions">
                <a class="btn btn-tickets" href="https://www.eventbrite.ca/e/yeah-man-entertainment-punktoberfest-tickets-1768096818179" target="_blank" rel="noopener">Tickets</a>
                <a class="btn btn-map" href="https://www.google.com/maps/dir//8889+Laurel+St+unit+106,+Vancouver,+BC+V6P+3V9/@49.2046355,-123.2077643,12z/data=!4m8!4m7!1m0!1m5!1m1!1s0x54867505c45bb40d:0x665c676e628d849f!2m2!1d-123.1253639!2d49.2046648?entry=ttu" target="_blank" rel="noopener">Map</a>
              </div>
            </article>

            <!-- Bully's -->
            <article class="show-card"
              data-title="Cascade • Dead Man's Hand • Hi Dive • Bluestem"
              data-date="2025-10-11"
              data-city="New West, BC"
              data-venue="Bully’s"
              data-desc="Stacked lineup at Bully’s. Doors 8pm, 19+."
              data-poster="posters/bullys-2025-10-11.jpg"
              data-map="https://www.google.com/maps/place/Bully's+Studios/@49.2047647,-122.9095717,16z"
              data-tickets="https://www.bullysstudios.ca/event-details/cascade-dead-mans-hand-hi-dive-bluestem?fbclid=PAZnRzaANLx7hleHRuA2FlbQIxMQABp7qEwOU0b9BtbCUZF9GxRWLgWU8WFZwanRA0BSBX5AL2tLOMvf7sm_qWrybu_aem_odF_4dD2BS2LG2GrvZqKQw">
              <figure class="show-media">
                <img src="posters/bullys.jpg" alt="Cascade / DMH / Hi Dive / Bluestem at Bully’s — Oct 11, 2025" loading="lazy">
              </figure>
              <div class="show-meta">
                <time datetime="2025-10-11">Oct 11, 2025</time>
                <span>New West, BC • Bully’s</span>
              </div>
              <div class="show-actions">
                <a class="btn btn-tickets" href="https://www.bullysstudios.ca/event-details/cascade-dead-mans-hand-hi-dive-bluestem?fbclid=PAZnRzaANLx7hleHRuA2FlbQIxMQABp7qEwOU0b9BtbCUZF9GxRWLgWU8WFZwanRA0BSBX5AL2tLOMvf7sm_qWrybu_aem_odF_4dD2BS2LG2GrvZqKQw" target="_blank" rel="noopener">Tickets</a>
                <a class="btn btn-map" href="https://www.google.com/maps/place/Bully's+Studios/@49.2047647,-122.9095717,16z" target="_blank" rel="noopener">Map</a>
              </div>
            </article>
          </div>
        </div>
      </div>
    </section>

    <!-- MUSIC -->
    <section id="music">
      <div class="container">
        <h2>Music</h2>
        <div class="music-embeds">
          <iframe src="https://open.spotify.com/embed/playlist/7bvt5vHquWCE3um3CWcIUo?si=fi-sPZGPSAi_bigFljB-4g" loading="lazy" allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture"></iframe>
          <iframe src="https://www.youtube.com/embed/EHyuJ257rb4" title="YouTube video" loading="lazy" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
        </div>
      </div>
    </section>

    <!-- CONTACT / SOCIALS -->
    <section id="contact">
      <div class="container">
        <div class="card">
          <strong>Follow</strong>
          <p class="muted">Find us everywhere @kamasutramurder</p>
          <div class="socials">
            <a href="https://www.instagram.com/kamasutramurder" aria-label="Instagram" target="_blank" rel="noopener">
              <svg width="26" height="26" viewBox="0 0 24 24" fill="none" aria-hidden="true"><path d="M7 2h10a5 5 0 0 1 5 5v10a5 5 0 0 1-5 5H7a5 5 0 0 1-5-5V7a5 5 0 0 1 5-5zm5 5a5 5 0 1 0 0 10 5 5 0 0 0 0-10zm6.5-.25a1.25 1.25 0 1 0 0 2.5 1.25 1.25 0 0 0 0-2.5z" stroke="currentColor"/></svg>
              <span class="sr-only">Instagram</span>
            </a>
            <a href="#" aria-label="YouTube" target="_blank" rel="noopener">
              <svg width="26" height="26" viewBox="0 0 24 24" fill="none" aria-hidden="true"><path d="M22.54 6.42a3 3 0 0 0-2.12-2.12C18.88 3.75 12 3.75 12 3.75s-6.88 0-8.42.55A3 3 0 0 0 1.46 6.42 31.1 31.1 0 0 0 .9 12a31.1 31.1 0 0 0 .56 5.58 3 3 0 0 0 2.12 2.12c1.54.55 8.42.55 8.42.55s6.88 0 8.42-.55a3 3 0 0 0 2.12-2.12A31.1 31.1 0 0 0 23.1 12a31.1 31.1 0 0 0-.56-5.58ZM9.75 15.02V8.98l5.5 3.02-5.5 3.02Z" stroke="currentColor"/></svg>
              <span class="sr-only">YouTube</span>
            </a>
            <a href="#" aria-label="Spotify" target="_blank" rel="noopener">
              <svg width="26" height="26" viewBox="0 0 24 24" fill="none" aria-hidden="true"><circle cx="12" cy="12" r="10" stroke="currentColor"/><path d="M7.5 10.5c3.2-1 6.8-.8 9.8.6M8.5 13.5c2.6-.8 5.5-.6 7.9.5M9.5 16.2c1.8-.5 3.8-.4 5.5.3" stroke="currentColor" stroke-linecap="round"/></svg>
              <span class="sr-only">Spotify</span>
            </a>
            <a href="https://kamasutramurder.bandcamp.com/" aria-label="Bandcamp" target="_blank" rel="noopener">
              <svg width="26" height="26" viewBox="0 0 24 24" fill="none" aria-hidden="true"><path d="M3 17h8l6-10H9L3 17Z" stroke="currentColor"/></svg>
              <span class="sr-only">Bandcamp</span>
            </a>
          </div>
        </div>
      </div>
    </section>
  </main>

  <footer>
    <div class="container footer-wrap">
      <small>© <span id="year"></span> Kama Sutra Murder. All rights reserved.</small>
      <small>Site by <a href="#">you</a>. Vancouver, BC.</small>
    </div>
  </footer>

  <!-- Mailchimp Modal (modal-only) -->
  <div id="mcModal" class="modal" hidden>
    <div class="modal-backdrop" data-close-mc></div>
    <div class="modal-panel" role="dialog" aria-modal="true" aria-labelledby="mcTitle">
      <button class="modal-close" aria-label="Close" data-close-mc>×</button>

      <div class="col-span-all">
        <h3 id="mcTitle" class="no-mt">Join the Mailing List</h3>
        <form
          action="https://kamasutramurder.us6.list-manage.com/subscribe/post?u=6cd8a075a536c3481921962b1&amp;id=51c81eb02f&amp;f_id=00edc2e1f0"
          method="post"
          id="mc-embedded-subscribe-form-modal"
          class="mc-form"
          target="_blank"
          novalidate>
          <div class="mc-row">
            <!-- UNIQUE field id for modal -->
            <input type="email" name="EMAIL" class="required email" id="mce-EMAIL-modal" placeholder="Enter your email" required>
            <button type="submit" name="subscribe" class="cta">Join the List</button>
          </div>
          <!-- UNIQUE response ids for modal -->
          <div id="mce-responses-modal" class="mc-responses" aria-live="polite">
            <div class="response" id="mce-error-response-modal"></div>
            <div class="response" id="mce-success-response-modal"></div>
          </div>
          <div aria-hidden="true" class="mc-hp">
            <input type="text" name="b_6cd8a075a536c3481921962b1_51c81eb02f" tabindex="-1" value="">
          </div>
          <p class="muted">No spam. Unsubscribe anytime.</p>
        </form>
      </div>
    </div>
  </div>

 <!-- Scripts -->
<script>
  // ===== Mobile menu: toggle + autoclose (animated via .open) =====
  const hamburger = document.getElementById('hamburger');
  const mobileMenu = document.getElementById('mobileMenu');

  function openMenu() {
    mobileMenu.classList.add('open');
    hamburger.setAttribute('aria-expanded', 'true');
  }
  function closeMenu() {
    mobileMenu.classList.remove('open');
    hamburger.setAttribute('aria-expanded', 'false');
  }
  function isMenuOpen() {
    return mobileMenu.classList.contains('open');
  }

  hamburger?.addEventListener('click', (e) => {
    e.stopPropagation();
    isMenuOpen() ? closeMenu() : openMenu();
  });

  // Close menu when clicking any link EXCEPT the Contact toggle
  mobileMenu.querySelectorAll('a:not(#contactToggle)').forEach(a => {
    a.addEventListener('click', closeMenu);
  });

  // Close on outside click
  document.addEventListener('click', (e) => {
    if (!mobileMenu.contains(e.target) && !hamburger.contains(e.target)) closeMenu();
  });

  // Graceful autoclose on mouse leave
  let leaveTimer;
  mobileMenu.addEventListener('mouseleave', () => { leaveTimer = setTimeout(closeMenu, 350); });
  mobileMenu.addEventListener('mouseenter', () => { clearTimeout(leaveTimer); });

  // Close on Escape
  document.addEventListener('keydown', (e) => {
    if (e.key === 'Escape' && isMenuOpen()) closeMenu();
  });

  // --- Contact submenu toggle ---
  const contactToggle = document.getElementById('contactToggle');
  const contactSub = document.getElementById('contactSub');

  function toggleContactSub(e) {
    e.preventDefault();
    const willOpen = contactSub.hasAttribute('hidden');
    if (willOpen) {
      contactSub.removeAttribute('hidden');
      contactToggle.setAttribute('aria-expanded', 'true');
    } else {
      contactSub.setAttribute('hidden', '');
      contactToggle.setAttribute('aria-expanded', 'false');
    }
  }
  contactToggle?.addEventListener('click', toggleContactSub);

  // Close menu when clicking any link EXCEPT the Contact toggler
  mobileMenu.querySelectorAll('a:not(#contactToggle)').forEach(a => {
    a.addEventListener('click', () => {
      // collapse submenu for next time, then close the menu
      contactSub?.setAttribute('hidden', '');
      contactToggle?.setAttribute('aria-expanded', 'false');
      closeMenu();
    });
  });

  // Also collapse submenu whenever the menu itself closes
  const _closeMenuOriginal = closeMenu;
  closeMenu = function () {
    contactSub?.setAttribute('hidden', '');
    contactToggle?.setAttribute('aria-expanded', 'false');
    _closeMenuOriginal();
  };

  // ===== Mailchimp modal controls (modal-only) =====
  const mcModal = document.getElementById('mcModal');
  const emailField = document.getElementById('mce-EMAIL-modal');
  const mcSuccess = document.getElementById('mce-success-response-modal');

  function openMcModal() {
    if (!mcModal) return;
    mcModal.hidden = false;
    document.body.style.overflow = 'hidden';
    setTimeout(() => emailField?.focus(), 50);
  }
  function closeMcModal() {
    mcModal.hidden = true;
    document.body.style.overflow = '';
  }

  // Any element with data-open-mc opens the modal
  document.querySelectorAll('[data-open-mc]').forEach(el => {
    el.addEventListener('click', (e) => { e.preventDefault(); openMcModal(); });
  });

  // Close modal on backdrop or X
  mcModal?.addEventListener('click', (e) => {
    if (e.target.matches('[data-close-mc], .modal-backdrop')) closeMcModal();
  });

  // Close modal on Escape
  document.addEventListener('keydown', (e) => {
    if (e.key === 'Escape' && mcModal && !mcModal.hidden) closeMcModal();
  });

  // Auto-close modal after Mailchimp success appears
  if (mcSuccess) {
    const observer = new MutationObserver(() => {
      const visible = mcSuccess.style.display !== 'none';
      const hasText = mcSuccess.textContent.trim() !== '';
      if (visible && hasText) setTimeout(closeMcModal, 1500);
    });
    observer.observe(mcSuccess, { childList: true, attributes: true, subtree: true });
  }

  // Year
  document.getElementById('year').textContent = new Date().getFullYear();
</script>
</body>
</html>

